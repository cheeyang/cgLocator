<span class='filterWrapper'>
    <div class='filterLabel'>Filter By Day :</div>
    <div class="cgFilter">
      <button onclick="toggleDropdown()" class="dropbtn">All</button>
      <div id="myDropdown" class="dropdown-content">
        <a class='dropdown-item' href="#">All</a>
        <a class='dropdown-item' href="#">Tuesday</a>
        <a class='dropdown-item' href="#">Wednesday</a>
        <a class='dropdown-item' href="#">Thursday</a>
        <a class='dropdown-item' href="#">Friday</a>
        <a class='dropdown-item' href="#">Saturday</a>
      </div>
    </div>
</span>

<div id="gmap"></div>
<div class='moreCgInfoModal'>MORE INFO</div>

<script type="text/javascript"> // State Objects
    //define all cgs here
    var cgs = [
        {
            name: 'Bukit Timah Tuesday Community Group',
            cong: 1,
            day: 'Tuesday',
            time: '7.45pm - 9.30pm',
            kids: false,
            latLong: [1.3294, 103.8021],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5b86587788251b19fa25add5/1535531396845/Purch.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/ghimmohthursdaycommunitygroup-8mxfs',
        },
        {
            name: 'Ghim Moh Thursday Community Group',
            cong: 2,
            day: 'Thursday',
            time: '7.30pm - 9.30pm',
            kids: false,
            latLong: [1.3068, 103.7868],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5b8631f66d2a7347b454725c/1535531127609/james-dan.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/ghimmohthursdaycommunitygroup'
        },
        {
            name: 'Tiong Bahru Friday Community Group',
            cong: 2,
            day: 'Friday',
            time: '8.00pm - 9.30pm',
            kids: true,
            latLong: [1.2865, 103.8270],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5b862edd575d1f9926d15b51/1535610092250/RAYMOND.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/tiongbahrufridaycommunitygroup'
        },
        {
            name: 'Cantonment Close Thursday Community Group',
            cong: 1,
            day: 'Thursday',
            time: '7.30pm - 9.30pm',
            kids: false,
            latLong: [1.2751, 103.8404],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5b6416ce0e2e7259c34003cd/1535520477309/IsaacNManwinED.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/cantomentclose-thursday-community-group-44t53-x8jbn'
        },
        {
            name: 'Upper Thomson Saturday Community Group',
            cong: 3,
            day: 'Saturday',
            time: '10.30am - 12.30pm',
            kids: true,
            latLong: [1.3691, 103.8454],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5b640d6870a6ad7be9671b0d/1537428217417/Shihao.jpg?format=1500w',
            page: "https://www.rhc.org.sg/new-blog-1/2018/2/1/angmokio-saturday-community-group-44t53",
        },
        {
            name: 'Jalan Kayu Saturday Community Group',
            cong: 3,
            day: 'Saturday',
            time: '7.30pm',
            kids: true,
            latLong: [1.3969, 103.8731],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ceca0d9297e8ba9ff505/1536918808406/KenAdeline.jpg?format=1500w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/jalankayu-saturday-community-group'
        },
        {
            name: 'Novena (Park Infinia) Community Group',
            cong: 1,
            day: 'Wednesday',
            time: '7.30pm - 9.30pm',
            kids: false,
            latLong: [1.3145, 103.8429],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5abba9b7562fa7acbf037893/1527216787423/Alvin%26ChristinaLiew-CG.jpg?format=1500w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/novena-parkinfinia-wednesday-community-group-e6h2t-4lehh-724tr-yfp'
        },
        {
            name: 'Orchard Wednesday Community Group',
            cong: 2,
            day: 'Wednesday',
            time: '7.30pm - 10.00pm',
            kids: false,
            latLong: [1.3048, 103.8318],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5abba6a90e2e72e0baa3ac94/1522248119255/Scott%26ArleenED.jpg?format=1500w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/orchard-wednesday-community-group-e6h2t-4lehh-724tr'
        },
        {
            name: 'Beauty World Saturday Community Group',
            cong: 3,
            day: 'Saturday',
            time: '10.30am - 12.30pm',
            kids: false,
            latLong: [1.3416, 103.7757],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5aa8ec7c652dea04983cda73/1522247337912/Daryl%26SauLingED.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/beautyworld-saturday-community-group-e6h2t-4lehh'
        },
        {
            name: 'Marymount Friday Community Group',
            cong: 1,
            day: 'Friday',
            time: '8.00pm - 9.30pm',
            kids: true,
            latLong: [1.3490, 103.8391],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5aa8e897e2c4839970126cf6/1537251461308/YanLiang%26AnnabelleTanCGED.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/marymount-friday-community-group-e6h2t-pzepy'
        },
        {
            name: 'Bukit Batok Tuesday Community Group',
            cong: 3,
            day: 'Tuesday',
            time: '8.00pm - 9.30pm',
            kids: false,
            latLong: [1.3590, 103.7637],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a9624e1c83025c265925f54/1532425181750/ShaunNShenEdited.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/bukitbatok-tuesday-community-group-e6h2t'
        },
        {
            name: `Women's Bible Study`,
            cong: 0,
            day: 'Tuesday',
            time: '10.00am - 12.00pm',
            kids: false,
            latLong: [1.3143, 105.0387],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a7aafab71c10b8aa3ae6c75/1522999663715/JeannieEDt.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/7/womens-bible-study',
        },
        {
            name: 'Cashew Road Wednesday Community Group',
            cong: 1,
            day: 'Wednesday',
            time: '7.30pm - 9.00pm',
            kids: false,
            latLong: [1.3700, 103.7646],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72c73f652deac3c3898c58/1519789790561/JeremyRuth-2.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/cashew-road-wednesday-community-group'
        },
        {
            name: 'Holland Village Wednesday Community Group',
            cong: 1,
            day: 'Wednesday',
            time: '7.30pm - 10.00pm',
            kids: false,
            latLong: [1.3111, 103.7961],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72c97eec212d13b8c36827/1519789761052/KarrieNFamilyEDITED_0-1.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/holland-village-wednesday-community-group'
        },
        {
            name: 'Mount Sophia Wednesday Community Group',
            cong: 1,
            day: 'Wednesday',
            time: '7.30pm - 9.30pm',
            kids: true,
            latLong: [1.2991, 103.8458],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72c9ca53450a892ab0123e/1522819722769/KamalJaneWEB-1.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/mount-sophia-wednesday-community-group'
        },
        {
            name: 'Tanjong Katong Wednesday Community Group',
            cong: 1,
            day: 'Wednesday',
            time: '7.15pm - 9.00pm',
            kids: true,
            latLong: [1.3060, 103.9050],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ca190d9297e8ba9f6f45/1519228345880/Greg+and+Vikki-1.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/tanjong-katong-wednesday-community-group'
        },
        {
            name: 'Pasir Panjang Thursday Community Group',
            cong: 1,
            day: 'Thursday',
            time: '7.00pm - 9.30pm',
            kids: true,
            latLong: [1.2761, 103.7919],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ca4d0d9297e8ba9f74ec/1519798764580/TomBernice.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/pasir-panjang-thursday-community-group'
        },
        {
            name: 'Dunearn Friday Community Group',
            cong: 1,
            day: 'Friday',
            time: '8.00pm - 10.00pm',
            kids: true,
            latLong: [1.3223, 103.8149],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ca8624a694cb29f63917/1519789995882/LianArnChaiYuanCG_3-1.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/dunearn-friday-community-group'
        },
        {
            name: 'Leonie Hill Friday Community Group',
            cong: 1,
            day: 'Friday',
            time: '8.00pm - 10.00pm',
            kids: true,
            latLong: [1.2978,103.8306],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cad4e4966b2c0159d149/1545189447979/Apurva+Thanju+%26+Galvin+Widjaja.png?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/leonie-hill-road-friday-community-group'
        },
        {
            name: 'Farrer Road Saturday Community Group',
            cong: 1,
            day: 'Saturday',
            time: '4.00pm - 6.00pm',
            kids: true,
            latLong: [1.3175,103.8055],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cb399140b7b7addc7d34/1519790105717/chan-vee2-1.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/farrer-road-saturday-community-group'
        },
        {
            name: 'Queenstown Saturday Community Group',
            cong: 1,
            day: 'Saturday',
            time: '10.00am - 11.30am',
            kids: true,
            latLong: [1.2948,103.8037],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cb66419202b9559925e1/1519790142779/GarySuLin_0-2.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/queenstown-saturday-community-group',
        },
        {
            name: 'Chinatown Wednesday Community Group',
            cong: 2,
            day: 'Wednesday',
            time: '7.30pm - 9.30pm',
            kids: false,
            latLong: [1.2865,103.8446],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cba30d9297e8ba9f9ae3/1527213984275/Elliot%26HuiED.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/chinatown-wednesday-community-group'
        },
        {
            name: 'Clementi Wednesday Community Group',
            cong: 2,
            day: 'Wednesday',
            time: '7.30pm - 9.15pm',
            kids: true,
            latLong: [1.3162, 103.7649],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cc0f652deac3c38a17f2/1519798201719/CharlesPearlene-1.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/clementi-wednesday-community-group'

        },
        {
            name: 'Novena (Appleton View) Community Group',
            cong: 2,
            day: 'Wednesday',
            time: '8.00pm - 9.30pm',
            kids: true,
            latLong: [1.3200,103.8412],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cc5324a694cb29f66c60/1522833669980/winston-charmaine-1.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/novena-wednesday-community-group'
        },
        {
            name: 'Dover Road Thursday Community Group',
            cong: 2,
            day: 'Thursday',
            time: '7.30pm - 9.30pm',
            kids: false,
            latLong: [1.3043,103.7778],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cc768165f596c6e75679/1519798255312/EricandRachel-Mar16_0-2.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/dover-road-thursday-community-group'
        },
        {
            name: 'Choa Chu Kang Thursday Community Group',
            cong: 2,
            day: 'Thursday',
            time: '7.30pm - 9.30pm',
            kids: true,
            latLong: [1.3854, 103.7443],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cdbcf9619ac3d253c7fc/1547027630928/nicholas+lydia+sim.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/choa-chu-kang-thursday-community-group'
        },
        {
            name: 'One North Thursday Community Group',
            cong: 2,
            day: 'Thursday',
            time: '7.30pm - 9.30pm',
            kids: false,
            latLong: [1.2998, 103.7876],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ce140d9297e8ba9fdf63/1519233934155/Tim+and+April-1.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/one-north-thursday-community-group'
        },
        {
            name: `Men's Discipleship`,
            cong: 0,
            day: 'Every Second Thursday',
            time: '7.50am - 8.50am',
            kids: false,
            latLong: [1.2830, 103.8513],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/t/5a8c30688165f52edbc5eb0e/1519136878368/RHC_albumart%2Braw.jpg?format=500w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/7/mens-discipleship-1'
        },
        {
            name: 'Ang Mo Kio Friday Community Group',
            cong: 2,
            day: 'Friday',
            time: '7.30pm - 9.00pm',
            kids: true,
            latLong: [1.3766,103.8213],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ccbd8165f596c6e75e53/1522823358879/Joe%2BRosCG-1.jpg?format=1000w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/ang-mo-kio-friday-community-group'
        },
        {
            name: 'Beauty World Friday Community Group',
            cong: 2,
            day: 'Friday',
            time: '7.00pm - 8.30pm',
            kids: true,
            latLong: [1.3415,103.7735],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ccf2ec212d13b8c3ca71/1519798321135/KD-2.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/beauty-world-friday-community-group'
        },
        {
            name: 'Chestnut Friday Community Group',
            cong: 2,
            day: 'Friday',
            time: '8.00pm - 10.00pm',
            kids: false,
            latLong: [1.3692,103.7673],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cd16ec212d13b8c3ced9/1519798359594/Eugene%26KayLim-CGED2-2.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/chestnut-friday-community-group'
        },
        {
            name: 'Pasir Ris Friday Community Group',
            cong: 2,
            day: 'Friday',
            time: '8.00pm - 9.30pm',
            kids: true,
            latLong: [1.3732,103.9472],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cd469140b7b7addcb771/1519798391358/aidan%2Bniki-1.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/pasir-ris-friday-community-group'
        },
        {
            name: 'Tanjong Katong Friday Community Group',
            cong: 2,
            day: 'Friday',
            time: '8.00pm - 9.30pm',
            kids: false,
            latLong: [1.304275,103.8937],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cd76652deac3c38a4037/1519233552346/Norman_Angela-1.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/tanjong-katong-friday-community-group'
        },
        {
            name: 'Compassvale (Sengkang) Friday Community Group',
            cong: 3,
            day: 'Friday',
            time: '8.00pm - 9.30pm',
            kids: true,
            latLong: [1.3868, 103.8914],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ce4224a694cb29f6a433/1519798845372/Charles%26JeaneLee-CGedited-1.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/compassvale-sengkang-friday-community-group'
        },
        {
            name: 'Chinatown Friday Community Group',
            cong: 3,
            day: 'Friday',
            time: '8.00pm - 10.00pm',
            kids: false,
            latLong: [1.2815, 103.8449],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ce6a419202b955997c18/1519873189897/Jacob%26JoyLiaoCGED.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/chinatown-friday-community-group'
        },
        {
            name: 'Braddell Saturday Community Group',
            cong: 2,
            day: 'Saturday',
            time: '3.00pm',
            kids: false,
            latLong: [1.3405,103.8449],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72cd97652deac3c38a43ed/1547096370640/isaac%26sam.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/braddell-saturday-cg'
        },
        {
            name: 'Chinatown Saturday Community Group',
            cong: 3,
            day: 'Saturday',
            time: '4.00pm',
            kids: false,
            latLong: [1.2815, 103.8448],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ce86c8302573ec325657/1519234223264/brandon+yip_0-1.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/chinatown-saturday-community-group'
        },
        {
            name: 'Commonwealth Saturday Community Group',
            cong: 3,
            day: 'Saturday',
            time: '10.30am',
            kids: true,
            latLong: [1.3024, 103.7983],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72ceaae2c483babaeac7d9/1522818873535/MingYangDanielleCG-1.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/commonwealth-saturday-community-group'
        },
        {
            name: '荷兰道华语小组',
            cong: 3,
            day: 'Thursday',
            time: '7.30pm - 9.30pm',
            kids: true,
            latLong: [1.3111, 103.7961],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a7426ac24a694c673f4def6/5a742770652deaae43b01c36/1538549931318/Yibin-CG-edited_4-1.jpg?format=1000w',
            page: "https://www.rhc.org.sg/new-blog-1/2018/2/1/-2-T91yT"
        },
        {
            name: '牛车水华语小组',
            cong: 3,
            day: 'Saturday',
            time: '4.00pm - 6.30pm',
            kids: true,
            latLong: [1.2848, 103.8439],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a7426ac24a694c673f4def6/5a74273e8165f59ee86921a6/1519236777447/AikKeongDenise-2.jpg?format=750w',
            page: "https://www.rhc.org.sg/new-blog-1/2018/2/1/-1-r0V3O"
        },
        {
            name: '武吉知马华语小组',
            cong: 3,
            day: 'Saturday',
            kids: true,
            time: '4.00pm - 6.30pm',
            latLong: [1.3416, 103.7757],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a7426ac24a694c673f4def6/5a7426ece4966b6754a95943/1519236936971/Edward%26Shuyi-3.jpg?format=750w',
            page: "https://www.rhc.org.sg/new-blog-1/2018/2/1/-pQJte"
        },
        {
            name: `River Valley Mum's Group`,
            cong: 0,
            day: 'Wednesday',
            time: '9.30am - 11.30am',
            kids: true,
            latLong: [1.2656, 103.8209],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72dd18f9619ac3d2558023/1522995404168/RosDanielED_0.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/river-valley-mums-group-gn0q9'
        },
        {
            name: `Yew Tee / Toh Yi Mum's Group`,
            cong: 0,
            day: '?',
            time: '9.00am - 11.30am',
            kids: true,
            latLong: [1.3973, 103.7475],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72dd359140b7b7adde7e9a/1519235277407/YvonneED.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/2018/2/1/yew-tee-toh-yi-mums-group-ITPUW'
        },
        {
            name: `Bukit Timah Mum's Group`,
            cong: 0,
            day: 'Wednesday',
            time: '9.30am - 11.30am',
            kids: true,
            latLong: [1.3258, 103.8080],
            mrt: '?',
            imgUrl: 'https://static1.squarespace.com/static/5a266b4c90badea30b86b672/5a72c67e8165f596c6e6a9b5/5a72db8d53450a892ab20c1e/1522995255299/JoyMumsGroupED.jpg?format=750w',
            page: 'https://www.rhc.org.sg/new-blog-1/bukit-timah-mums'
        }
    ]

    var filteredCgs = cgs.slice(); //clone cg array;

    var showMoreDetails = false;

    var modalElement = document.getElementsByClassName('moreCgInfoModal')[0];

    var selectedCg = 0;

</script>



<script type="text/javascript">    //FUNCTION DEFINITIONS
    /* When the user clicks on the button,
    toggle between hiding and showing the dropdown content */
    function toggleDropdown() {
      document.getElementById("myDropdown").classList.toggle("show");
    }

    window.onscroll = (event) => {
        let y = window.scrollY;
        console.log('Y scroll position is : ',window.scrollY);

        if (window.innerWidth<500) {
            let mainPageElement = document.getElementById('collection-5c46e2d18a922d3a72f7e0ac');
            mainPageElement.style = "margin-top: 104px; margin-bottom: 0px;";
        }

        let headerElement = document.getElementsByClassName('Mobile-bar Mobile-bar--top')[0];
        let logoElement = document.getElementsByClassName('Mobile-bar-branding-logo')[0];

        if (y>5) {
            headerElement.classList.add('reducedHeightMobileBar');
            logoElement.classList.add('reducedSizeLogo');
        } else {
            headerElement.classList.remove('reducedHeightMobileBar');
            logoElement.classList.remove('reducedSizeLogo');
        }
    }

    // Close the dropdown menu if the user clicks outside of it
    window.onclick = function(event) {
      console.log('event clicked is.. ',event.target);
      var selectedDay = event.target.innerHTML;
      console.log('event innerHTML :: ',selectedDay);
      if (!event.target.matches('.dropbtn')) {
        console.log('item clicked is NOT the filter button');
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        //hide all dropdown items
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          openDropdown.classList.remove('show');
        }
        //if dropdown item is clicked
        if (event.target.matches(".dropdown-item")) {
            console.log('matched drop-down item');
            var dropButton = document.getElementsByClassName('dropbtn')[0];
            console.log(dropButton);
            dropButton.innerHTML = selectedDay;
            filterCgs(selectedDay);
        }
      }
      // if (modalElement.classList.contains(''))
    }

    filterCgs = (selectedDay) => {
        console.log('entered function. selectedDay = ',selectedDay);
        if (selectedDay==='All') {
            filteredCgs = cgs.slice();  //clone unfiltered cg array
        } else {
            filteredCgs = cgs.filter((cg)=>(cg.day===selectedDay));
        }
        console.log('done filtering cgs. filteredCgs :: ', filteredCgs);
        initMap();
    }

    congreSelector = (cong) => {
        switch (cong) {
            case 1:
                return '1st Congregation';
            case 2:
                return '2nd Congregation';
            case 3:
                return '3rd Congregation';
            default:
                return 'All Congregations';
        }
    }

    displayMoreInfo = (index) => {
        console.log(`displaying more info for cg #${index}....`);
        const cg = filteredCgs[index];
        modalElement.classList.add('show');//bring up modal if hidden
        //if already showing, do not close.
        //execute this regardless
        modalElement.innerHTML =
            `<a href=${cg.page} class='cgModalContent'>
                <span class='cgName'>${cg.name}</span>
                <span>${cg.day}</span>
                <span>${cg.time}</span>
                <span>Kid-friendly : ${cg.kids?'yes':'no'}</span>
                <span>${congreSelector(cg.cong)}</span>
                <span>Nearest MRT: ${cg.mrt}</span>
            </a>`;
    }

    function initMap() {
        //map cg info to locations array
        var locations = filteredCgs.map((cg,index)=>([`<a href='${cg.page}' class='gmapInfoWrapper' onclick='displayMoreInfo(${index})'>
            <img class='infoImage' src='${cg.imgUrl}'/>
            <div class='infoText'>${cg.name}</div>
          </a>`,
          cg.latLong[0],
          cg.latLong[1]]));

        var map = new google.maps.Map(document.getElementById('gmap'), {
          zoom: 11.5,
          center: new google.maps.LatLng(1.3521, 103.8198),
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          // disableDefaultUI: true
        });

        var infoWindow = new google.maps.InfoWindow();
        google.maps.event.addListener(infoWindow,'closeclick',function(){
           modalElement.classList.remove('show');
           // remove the modal on clicking the close button
        });

        var marker, i;

        console.log(`placing ${locations.length} markers on the map... `)
        for (i = 0; i < locations.length; i++) {
          marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: map
          });

          google.maps.event.addListener(marker, 'click', (function(marker, i) {
            isInfoWindowOpen = (iWindow) => {
              var mapRef = iWindow.getMap();
              return (mapRef !== null && typeof mapRef !== "undefined");
            }
            return function() {
              if (isInfoWindowOpen(infoWindow) && selectedCg===i) { //if infoWindow is open and same marker is clicked
                  infoWindow.close();
                  modalElement.classList.remove('show');
              } else {
                  infoWindow.setContent(locations[i][0]);
                  infoWindow.open(map, marker);
                  modalElement.classList.add('show');
                  displayMoreInfo(i);
              }
              selectedCg = i;
            }
          })(marker, i));
        }
    }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA_uZpkOodLnCyfSLSNJHYahWzpaQKS258&callback=initMap"
    async defer></script>
